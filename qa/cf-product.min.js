!function(){try{let d={init:()=>{d.setAvailableBodyClass(),d.enableShipping(),d.getDataProduct(),d.toggleCart(),d.addCartVisualization(),d.controlBtnsQuantity(),d.buildFlags(),d.applyShelfCarrousel(),d.fixInfoSectionTitle()},ajaxStop:()=>{},data:{id:$("#___rc-p-id").val(),response:null},regex:{qtt:/qty=\d+/g},setAvailableBodyClass:()=>{function s(t){t?$(document.body).addClass("cf-product-available").removeClass("cf-product-unavailable"):$(document.body).addClass("cf-product-unavailable").removeClass("cf-product-available")}$(document).on("skuSelected.vtex",function(t,e,a){s(a.available)}),s(skuJson.available)},enableShipping:()=>{"function"==typeof window.ShippingValue&&window.ShippingValue()},getDataProduct:()=>{$.ajax({type:"GET",url:`/api/catalog_system/pub/products/search/?fq=productId:${d.data.id}`,dataType:"json",contentType:"application/json",headers:{"Content-Type":"application/json",Accept:"application/vnd.vtex.ds.v10+json"}}).done(function(t){d.data.response=t[0],d.buildListDescriptions(),d.buildListSensorial(),d.buildBrandCountry(),d.verifyIfExistsDescription()})},buildListDescriptions:()=>{let a=[],t=d.data.response.Tipo;null!=t&&-1==t[0].indexOf("INFORMADO")&&a.push({text:t,class:"tipo"});let e=d.data.response.Regiao;null!=e&&-1==e[0].indexOf("INFORMADO")&&a.push({text:e,class:"regiao"});let s=d.data.response.Produtor;null!=s&&-1==s[0].indexOf("INFORMADO")&&a.push({text:s,class:"produtor"});let n=d.data.response["Teor Alcolico"];null!=n&&-1==n[0].indexOf("INFORMADO")&&a.push({text:n,class:"teor"});let l=d.data.response.Volume;null!=l&&-1==l[0].indexOf("INFORMADO")&&a.push({text:l,class:"volume"});let i=d.data.response.Safra;null!=i&&-1==i[0].indexOf("INFORMADO")&&a.push({text:i,class:"safra"});let o=d.data.response["Temperatura Ideal"];null!=o&&-1==o[0].indexOf("INFORMADO")&&a.push({text:o,class:"temperatura"});let c=d.data.response.Classificacao;if(null!=c&&-1==c[0].indexOf("INFORMADO")&&a.push({text:c,class:"classificacao"}),0==a.length)d.verifyWineContent();else{1<a.length&&a.sort((t,e)=>t.class>e.class?1:-1);let t=$("#cf-p-desription--features"),e="";a.map(t=>{t=`\n                            <li class="desc-li ${t.class}">\n                                <div class="desc-li-left">\n                                    <span class="desc-image"></span>\n                                </div>\n                                <div class="desc-li-right">\n                                    <span class="desc-title">${t.class}</span>\n                                    <span class="desc-text">${t.text}</span>\n                                </div>\n                            </li>\n                        `;e+=t}),t.html(e)}},buildListSensorial:()=>{let a=[],t=d.data.response["Analise Visual"];null!=t&&-1==t[0].indexOf("NÃO")&&-1==t[0].indexOf("NAO")&&a.push({text:t,class:"visual",img:"visual"});let e=d.data.response["Analise Gustativa"];null!=e&&-1==e[0].indexOf("NÃO")&&-1==e[0].indexOf("NAO")&&a.push({text:e,class:"gustativo",img:"gustativo"});let s=d.data.response["Analise Olfativa"];if(null!=s&&-1==s[0].indexOf("NÃO")&&-1==s[0].indexOf("NAO")&&a.push({text:s,class:"olfativo",img:"olfativo"}),0==a.length)$(".cf-product.sensorial").hide();else{let t=$("#cf-p-sensorial--list"),e="";a.map(t=>{t=`\n                            <li>\n                                <img src="https://casaflora.vteximg.com.br/arquivos/${t.img}.png" />\n                                <strong>${t.class}</strong>\n                                <span>${t.text}</span>                \n                            </li>\n                        `;e+=t}),t.html(e)}},verifyWineContent:()=>{let t=$("#cf-p-description--commentary"),e=$("#cf-p-description--boxes"),a=t.find(".productDescription"),s=t.find("h3");e.hide(),s.hide(),t.attr("class","col-xs-12 col-sm-12 col-md-12"),a.addClass("width-full")},toggleCart:()=>{let t=$("#cf-p-btncart"),e=$("#cf-cart-continue-buy");t.on("click",function(){$(document.body).addClass("cf-cartvis-on")}),e.on("click",function(){$(document.body).removeClass("cf-cartvis-on")})},addCartVisualization:()=>{$("#cf-p-btncart").on("click",()=>{var t=$("#cf-p-qtt-input").val(),e=$("#calculoFrete").attr("seller"),e={id:parseInt(d.data.id),quantity:parseInt(t),seller:parseInt(e)};vtexjs.checkout.addToCart([e],null,1).done(function(t){$(document.body).addClass("cf-cartvis-on")})})},controlBtnsQuantity:()=>{let t=$(".buttons.quantity"),e=t.find(".btn-qtt-less"),a=t.find(".btn-qtt-more"),s=t.find("#cf-p-qtt-input");e.on("click",()=>{var t=s.val();1!=t&&(t--,s.val(t),d.changeValueBuyButton(t))}),a.on("click",()=>{var t=s.val();t++,s.val(t),d.changeValueBuyButton(t)})},changeValueBuyButton:a=>{if($(".buy-button.buy-button-ref").length){let t=$(".buy-button.buy-button-ref"),e=t.attr("href");e=e.replace(d.regex.qtt,`qty=${a}`),t.attr("href",e)}},buildFlags:()=>{let e=$(".cf-product.image .list-flags");if(e.find("[class*='desconto-']").length){let t=e.find("[class*='desconto-']").text();t=t.replace(/desconto-/g,""),t=`${t}% <strong>OFF</strong>`,e.find("[class*='desconto-']").html(t)}},buildBrandCountry:()=>{if(d.data.response["País"]){var a=$(".cf-product.image #show");console.log(a);let t=d.data.response["País"][0],e=t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(" ","-");$(`\n                        <div class="country-wrapper">\n                            <span class="country-name ${e}">${t}</span>\n                        </div>\n                    `).appendTo(a)}},applyShelfCarrousel:()=>{$(".cf-product.shelf-main").removeAttr("style");let e=$(".cf-product.shelf-main .shelf.wrapper"),a=$(".cf-product.shelf-main .shelf.title");if(0!=e.children().length){e.find("h2").appendTo(a);let t=e.find(".prateleira > ul");4==t.children("li[layout]").length?t.addClass("shelf-no-slick"):4<t.children("li[layout]").length&&(t.slick({arrows:!0,dots:!1,autoplay:!1,draggable:!1,infinite:!0,slidesToShow:4,slidesToScroll:1,speed:1e3,responsive:[{breakpoint:1200,slidesToShow:3,slidesToScroll:1},{breakpoint:991,settings:"unslick"}]}),t.each(function(){$(this).find(".slick-arrow").wrapAll("<div class='slick-nav' />")}))}},fixInfoSectionTitle:()=>{-1==vtxctx.departmentName.toLowerCase().indexOf("vinho")&&($("#cf-p-description--commentary h3 .first").text("Mais"),$("#cf-p-description--commentary h3 .second").text("Informações"))},verifyIfExistsDescription:()=>{d.data.response.description.length||($(".cf-product.title-description").hide(),$(".cf-product.description").hide(),$(".cf-product.medium-banner").hide())}};$(document).ready(d.init),$(document).ajaxStop(d.ajaxStop)}catch(t){console.log("Erro na instância do [Product]: ",t)}}();